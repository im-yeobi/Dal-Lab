## Day 3

2019.10.22 (화)



오늘의 키워드

- 스프링 싸이클
- 지난 시간에는 도메인에 집중
- 오늘은 application과 controller에서 들어간다.

기능에 집중 — application 먼저

API에 집중 — controller 먼저



### Controller

- Framework에 붙는다. 도메인, 애플리케이션 등은 프레임워크에 의존적이지 않다.



### 스프링 IoC 컨테이너

- 스프링은 의존성 관리를 직접 해준다. 개발자는 빈의 생성을 고민할 필요가 없다.

- 필요한 인터페이스를 스프링의 IoC 컨테이너로부터 주입 받아서 사용한다. (생성된 인스턴스를 내놔)

- `스프링은 객체의 생명주기를 관리한다.`

- 스프링의 장점 

  - 알아서 조립해서 나오기 때문에 편리하다.

  - EJB컨테이너 안에서 도는데 하나 돌리는데 매우 오래 걸린다.

    

### frisby

- Spring과 관계 없이 API 만 테스트



### 객체들간의 의존성을 줄이자

- 객체들간의 순환 참조를 막아야 한다.
- 컨트롤러에서 서비스를 참조하는데, 이 참조하는 것을 테스트 한다.



### 테스트 코드

- 테스트를 먼저 작성하면 변경되는 모든 상황에 대한 체크를 할 수 있다.
- 테스트 대상이 아닌 것은 Mock을 사용한다.
- spy — 진짜가 있는데 가짜를 씌운 것
- mock — 실제로 가짜 객체이다.
- SpyBean은 진짜인데, 테스트 과정에서 제어가 가능한 침투 객체이다.
- MockBean은 완전한 가짜 객체이다. 껍데기뿐이 없는 객체.



### 도메인 객체의 의존

- 애플리케이션 레이어에서 여러 도메인 객체를 사용한다.
- Controller
  - 컨트롤러는 사용자와 서비스를 이어준다.
- Application  ⇒ use case
  - 컨트롤러와 도메인들간의 가교 역할
  - application 레이어에서는 데이터베이스에 대한 mocking을 한다.
- Junit 익숙해져야 한다.
- Spring 익숙해져야 한다.



### Q. Service 를 테스트하는 이유

- Service는 어플리케이션의 핵심이다.
- 이 애플리케이션이 정말 뭐하는 서비스인가를 알려면 애플리케이션 레이어를 보면 된다.
- Service에 대한 테스트를 작성하고, 해당 테스트를 보는 것만으로 전체 서비스를 알 수 있다.
- 웹 API가 어떻게 생겼는지 보려면 Controller



### 리뷰

- 소감 
  - 타자 치는 재미가 있었다.
- 좋았던 점 
  - 컨트롤러에 대한 테스트 코드를 작성할 때, Service의 Mock 객체를 만들어 객체 간의 협력 관계를 테스트 코드 안에서 확인할 수 있다는 거시 좋았다.
- 아쉬웠던 점 
  - Total 시간이 부족하다보니 강의 속도가 빠른 점이 아쉬웠다.