## Day 2

2019.10.17 (목)



- 오늘의 키워드

  - 객체지향
  - 도메인 주도 설계
  - 클린 아키텍처
  - Soc (Separation of Concerns, 관심사의 분리)

  

### 객체란 ?

- 데이터와 프로시저의 묶음
- 데이터 — 상태, 멤버변수
- 프로시저 — 특징, 행동, 메소드, 오퍼레이터 
  - 시그니처 
    - 이름
    - 파라미터
    - return type
- 클래스 
  - 어떻게 작동할 것인지를 정의해둔 것.



### 객체지향 프로그래밍이란 ?

- 커다란 프로그램을 객체의 단위로 나눈것.
- `객체들간의 협업` (상호 요청)
- hierachy 
  - 추상화
  - 구체화
- 복잡성을 통제하기 위해 객체지항 프로그래밍을 한다.



### 도메인

- 기술과 도메인이 섞여있기 때문에 문제를 푸는 것이 더 어려워진다. 
  - 기술과 도메인을 분리하면 문제의 본질을 파악 할 수 있다.
  - 본질은 도메인이고 기술은 비본질이다.
  - 기술보다는 도메인을 계속 고민해야 한다.
- 도메인을 객체지향적으로 다뤄야 한다. 
  - 그래야 복잡한 것들을 쉽게 다룰 수 있다.
- 도메인을 어떻게 관리할 것인가 ?
- 도메인 용어는 개발자들 사이에서 통일해야 한다.
- 도메인이 설계를 주도하게 해야 한다.
- 서비스를 크게 보면 하나의 도메인이지만 세부적으로 여러 도메인으로 나뉜다. 
  - boundry context를 정하고 하나의 세부 도메인이 해당 context를 벗어나지 못하도록 한다.
- 도메인 모델을 잘 만들어야 한다. 
  - 모델
  - 모델링 — 추상화 과정
  - 추상화 — 본질만 남기고 비본질적인건 제외. 불필요한 것은 제외하여 복잡성을 낮춘다.



### SoC (관심사의 분리)

- 본질적인 부분(도메인)과 비본질적인 부분(UI, 인프라(DB))을 분리하기.
- 예를 들어 View / DB 분리 (관심사를 분리한다.)



### 클린 아키텍처

- '설계를 한다'의 의미 
  - 관련된걸 모음(응집성)  < = > 관련 없는 건 분리(직교성)
  - A가 ⇒ B를 호출 (A는 B에 의존한다. 의존성)
  - 의존의 문제 
    - 순환
    - 변경의 전파 (A가 바뀌면 B를 변경해야 한다.)
  - 의존성의 방향을 통제해야 한다.
  - 의존성을 줄이기 위해 interface를 사용한다.
  - 인터페이스를 사용하면 하나의 객체의 수정에 영향을 받지 않는다. ⇒ 이건 어떤 의미일까 ?
- 본질은 내부에 있고, 비본질적인 것은 외부에 존재한다. 
  - domain → use case → controller → web, framework
  - framework은 비본질적인 것이다.
  - Spring을 사용하는 이유 
    - spring을 사용하는 이유는 스프링에 의존하지 않아도 되게끔 동작한다. 
      - POJO



### 단위 테스트

- 각각의 레이어의 입장에서의 단위 
  - 자동차를 타는 사람의 입장에서는 자동차가 하나의 단위
  - 엔진의 입장에서는 엔진 부품이 하나의 단위

우리의 프로젝트를 위한 설계



### 사용자 스토리

1. 상품 목록 확인
2. 상품 상세 확인
3. 상품 카테고리 목록 확인
4. 상품 카테고리별 상품 목록 확인
5. 장바구니에 상품 담기
6. 장바구니에 담긴 상품 구입
7. 주문 목록 확인



### API

- 필요한 API 설계



### Domain

- Model ⇒ Entity(Identifier), Value Object
- Collection ⇒ Repository 
  - 사실은 컬렉션도 모델이나, 모델을 관리하는 집합과 같은 개념이다.
  - DB와 연결될 가능성이 높다.
  - 궁금한 점. Model 과 Collection을 구분하는 명확한 설명. 
    - 모델들을 관리하는 객체를 컬렉션(Repository)라고 정의하였다. 모델에 대한 생애주기를 관리한다.
- Entity 
  - Identifier가 존재한다
  - `동일함`
  - 앨리스의 키가 커지고 작아지고. 키가 바뀐다고 해도 앨리스가 아닌 것은 아니다.
- Value Object 
  - Identifier가 없다.
  - `동등함`에 집중한다.



### 레이어 구분

- API 레이어 - application/service 레이어 `use case` - 모델 레이어
- use case만 보면 도메인을 알 수 있다.



### 테스트 코드 작성

- Controller를 제외하고는 온전히 자바로 만든다.
- Controller는 스프링 의존성 사용한다.
- 테스트 코드에 대한 설명을 잘 써놔야 한다. 링크를 걸 수도 있고 주석에 설명을 달 수도 있다.
- 아샬님은 테스트 코드를 작성할 때 바깥에서부터

리팩토링 단위로 커밋